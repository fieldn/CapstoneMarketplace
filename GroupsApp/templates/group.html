{% extends "body.html" %}

{% block content %}
	<div class="container theme-showcase" role="main">
		<div class="jumbotron" style="background-color:#DDE0F8">
			<h1>{{ group.name }}</h1>
			{% if group.project != None %}
            <h2><a href="/project?name={{ group.project }}">{{ group.project }}</a></h2>
			{% endif %}
			<p>{{ group.description }}</p>
	        {% if group.project != None %}
            <div class="progress">
                <div class="progress-bar" role="progressbar" aria-valuenow="{{ completedWeight }}"
                    aria-valuemin="0" aria-valuemax="{{ totalWeight }}" style="width:{{ completedPercent }}%">
                </div>
            </div>
            {% endif %}
			{% if userIsMember %}
			<a href="/group/unjoin?name={{ group.name }}" class="btn btn-default">Unjoin this Group</a>
			<a href="/group/update?id={{ group.id }}" class="btn btn-default">Update Group</a>
			<a href="/group/remove?name={{ group.name }}" class="btn btn-default">Remove Group</a>
			{% else %}
			<a href="/group/join?name={{ group.name }}" class="btn btn-default">Join this Group</a>
			{% endif %}
			<a href="/group/getComments?name={{ group.name }}&user={{ user }}" class="btn btn-default">Discuss this Group</a>
		</div>
	</div>
	
	<div class="container">
		<div class="table-responsive">
			<table class="table table-striped sortable">
				<thead>
					<tr>
						<th>Users</th>
					</tr>
				</thead>
				<tbody>
					{% for item in group.members.all %}
					<tr>
                        <td><a href="/user?user={{ item.email }}">{{ item.get_full_name }}</a></td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

	{% if group.project == None %}
    <div class="container">
		<div class="table-responsive">
			<table class="table table-striped sortable">
				<thead>
					<tr>
						<th>Suggested Projects</th>
					</tr>
				</thead>
				<tbody>
					{% for project in projects %}
					<tr>
                        <td><a href="/project?name={{ project.name }}">{{ project.name }}</a></td>
                        <td>{{ project.description }}</td>
                        <td><a href="/company?name={{ project.company.name }}">{{ project.company.name }}</a></td>
                        <td><a href="/group/accept?group={{ group.name }}&project={{ project.name }}" class="btn btn-default">Accept this Project</a></td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	{% else %}
    <div class="container" role="main">
        <div class="table-responsive">
            <table class="table table-striped sortable">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in features %}
                    <tr>
                        <td>{{item.name}}</td>
                        <td>{{item.description}}</td>
                        <td>
                            <form action="/group/feature/done?group={{ group.name}}&feat_id={{ item.id }}" method="post">
				                {% csrf_token %}
                                <button type="submit" class="btn btn-default">Complete</button>
                            </form>
                        </td>

                    </tr>
                    {% endfor %}
                    {% for item in completeFeatures %}
                    <tr>
                        <td><s>{{item.name}}</s></td>
                        <td><s>{{item.description}}</s></td>
                        <td>
                            <form action="/group/feature/undone?group={{ group.name}}&feat_id={{ item.id }}" method="post">
				                {% csrf_token %}
                                <button type="submit" class="btn btn-default">Incomplete</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
	{% endif %}

{% endblock %}
